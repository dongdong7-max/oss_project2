<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>assignment#2-1 form_validation</title>
</head>
<style>

    body {
        margin: 0% 15% 0% 15%;
        font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", "Noto Sans", "Liberation Sans", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
    }

    label {
        display: inline-block;
        font-weight: 500;
    }
    input[type="text"]:focus, select:focus {
        outline: none;
        border-color: #86b7fe;
        box-shadow: 0 0 0 0.25rem rgb(13 110 253 / 25%);
    }

    .div_main {
        display: flex;
        margin: 50px 0;
        gap: 40px; 
    }
    .div_left {
        flex-grow: 1;
    }
    .div_right {
        min-width: 300px;
    }

    .div_top {
        text-align: center;
        margin: 5%;
        font-weight: lighter;
    }
    .div_top h2 {
        font-weight: 400;
        font-size: 25pt;
    }
    label.fname {
        margin-right: 35%;
    }
    

    input[type="text"], select {
        margin-top: 10px;
        margin-bottom: 5px; 
        border: 1px solid #ced4da;
        width: 100%;
        height: 38px;
        border-radius: 7px;
        padding: 0 12px;
        box-sizing: border-box; 
    }
    
    .name-group {
        display: flex;
        gap: 15px;
    }
    .name-group > div {
        flex: 1;
    }
    
    .location-group {
        display: flex;
        gap: 15px;
    }
    .location-group > div {
        flex: 1;
    }

    .custom-hr {
        border: none;
        height: 1px;
        background-color: #e0e0e0;
        margin: 40px 0;
    }
    .payment-group {
        display: flex;
        gap: 15px;
    }
    .payment-group > div {
        flex: 1;
    }

    input[name=continue] {
        width: 100%;
        height: 50px;
        border: none;
        border-radius: 7px;
        background-color: cornflowerblue;
        color: white;
        font-size: larger;
        margin-bottom: 30px;
        cursor: pointer;
    }
    input[name=continue]:hover {
        background-color: #567ab5;
    }
    
    .div_bottom_label, .div_bottom_label1 {
        text-align: center;
        color: #6c757d;
    }
     .div_bottom_label1 {
        margin-bottom: 15px;
     }
     .div_bottom_label1 a{
        color: #6c757d;
        text-decoration: none;
        margin: 0 5px;
     }

    .your {
        margin-right: 60%;
        color: cornflowerblue;
        font-size: larger;
    }
    .num {
        color: white;
        font-size: larger;
        padding: 2px 8px;
        border-radius: 10px;
        background-color: cornflowerblue;
    }
    .list {
            list-style: none;
            padding: 0;
            margin: 0;
            background-color: white;
            border: 1px solid #e0e0e0;
            border-radius: 5px;
    }
    .info {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 12px 15px;
        border-bottom: 1px solid #f0f0f0;
    }
    .info div{
        display: flex;
        flex-direction: column;
    }
    .info span:first-child{
        font-weight: bold;
    }
    .info span:nth-child(2){
        color: #6c757d;
        font-size: 0.9em;
    }
     .total-row strong {
        font-weight: bold;
    }

   
    .invalid-feedback {
        color: #dc3545;
        font-size: 0.875em;
        display: none; 
        width: 100%;
        margin-top: 0.25rem;
    }

    input.is-invalid, select.is-invalid {
        border-color: #dc3545; 
    }

    input.is-valid, select.is-valid {
        border-color: #198754; 
    }

.your{
        margin-right: 60%;
        color: cornflowerblue;
        font-size: larger;
    }
    .num{
        color: white;
        font-size: larger;
        border: cornflowerblue;
        border-radius: 7px;
        background-color: cornflowerblue;
    }
    .list{
            list-style: none; /* 목록 앞의 점(•) 제거 */
            padding: 0;
            margin: 0;
            background-color: white;
            border: 1px solid #e0e0e0;
            border-radius: 5px;
    }
    .info{
        display: flex; /* 내부 요소들을 가로로 배치 */
            justify-content: space-between; /* 양쪽 끝으로 정렬 */
            align-items: center; /* 세로 중앙 정렬 */
            padding: 12px 0;
            border-bottom: 1px solid #f0f0f0;

    }
</style>
<body style="margin: 0% 15% 0% 15%;">
    <div style="text-align: center;" class="div_top">
        <img src="https://getbootstrap.com/docs/5.2/assets/brand/bootstrap-logo.svg" width="70" height="50">
        <h2>checkout form</h2>
        <div >Below is an example form built entirely with Bootstrap’s 
            form controls. Each required form group has a validation 
            state that can be triggered by attempting to submit the form 
            without completing it.
        </div>
    </div>
    
    <form id="checkout-form" novalidate>
        <div class="div_main">
            <div class="div_left">
                <h2>Billing address</h2>
                
                <div class="name-group">
                    <div>
                        <label for="fname">First name</label>
                        <input type="text" id="fname" name="first_name" required>
                        <div class="invalid-feedback">Valid first name is required.</div>
                    </div>
                    <div>
                        <label for="lname">Last name</label>
                        <input type="text" id="lname" name="last_name" required>
                        <div class="invalid-feedback">Valid last name is required.</div>
                    </div>
                </div>
            
                <div>
                    <label for="uname">Username</label>
                    <input type="text" id="uname" name="username" placeholder="Username" required>
                    <div class="invalid-feedback">Your username is required.</div>
                </div>

                <div>
                    <label for="email">Email (Optional)</label>
                    <input type="text" id="email" name="email" placeholder="you@example.com">
                </div>

                <div>
                    <label for="address">Address</label>
                    <input type="text" id="address" name="address" placeholder="1234 Main st" required>
                    <div class="invalid-feedback">Please enter your shipping address.</div>
                </div>
                
                <div>
                    <label for="address_option">Address 2 (Optional)</label>
                    <input type="text" id="address_option" name="address_option" placeholder="Apartment or suite">
                </div>
                
                <div class="location-group">
                    <div>
                        <label for="country">Country</label>
                        <select id="country" name="country" required>
                            <option value="">Choose...</option>
                            <option value="unite_state">United States</option>
                        </select>
                        <div class="invalid-feedback">Please select a valid country.</div>
                    </div>
                    <div>
                        <label for="state">State</label>
                        <select id="state" name="state" required>
                            <option value="">Choose...</option>
                            <option value="california">California</option>
                        </select>
                        <div class="invalid-feedback">Please provide a valid state.</div>
                    </div>
                    <div>
                        <label for="zip">Zip</label>
                        <input type="text" id="zip" name="zip" required>
                        <div class="invalid-feedback">Zip code required.</div>
                    </div>
                </div>

                <hr class="custom-hr">
                <input class="agree" type="checkbox" id="agree1" name="agree1">
                <label class="agree" for="agree1">Shipping address is the same as my billing address</label><br>
                <input class="agree" type="checkbox" id="agree2" name="agree2">
                <label class="agree" for="agree2">Save this information for next time</label><br>
                <hr class="custom-hr">
                
                <h2>Payment</h2>
                <div>
                    <input type="radio" id="pay1" name="pay" required>
                    <label for="pay1">Credit card</label><br>
                    <input type="radio" id="pay2" name="pay" required>
                    <label for="pay2">Debit card</label><br>
                    <input type="radio" id="pay3" name="pay" required>
                    <label for="pay3">PayPal</label><br>
                    <div class="invalid-feedback">Please select a payment method.</div>
                </div>

                <div class="payment-group">
                     <div>
                        <label for="card_name">Name on card</label>
                        <input type="text" id="card_name" name="card_name" required>
                        <div style="font-size: small; color: #6c757d; margin-top: 5px;">Full name as displayed on card</div>
                        <div class="invalid-feedback">Name on card is required.</div>
                    </div>
                    <div>
                        <label for="card_number">Credit card number</label>
                        <input type="text" id="card_number" name="card_number" required>
                        <div class="invalid-feedback">Credit card number is required.</div>
                    </div>
                </div>

                <div class="payment-group">
                    <div>
                        <label for="expiration">Expiration</label>
                        <input type="text" id="expiration" name="expiration" required>
                        <div class="invalid-feedback">Expiration date required.</div>
                    </div>
                    <div>
                        <label for="cvv">CVV</label>
                        <input type="text" id="cvv" name="cvv" required>
                        <div class="invalid-feedback">Security code required.</div>
                    </div>
                </div>
                <hr class="custom-hr">

                <input type="submit" name="continue" value="Continue to checkout"><br>
            </div>
            <div class="div_right">
                <div class="div_right">
            <!--your cart-->
            <span class="your">Your cart</span>
            <span class="num">3</span>
            <ul class="list">
                <li class="info">
                    <div>
                        <span>Product name</span>
                        <span>$12</span>
                        <span>Brief description</span>
                    </div>
                </li>
                <li class="info">
                    <div>
                        <span>Second product</span>
                        <span>$8</span>
                        <span>Brief description</span>
                    </div>
                </li>
                <li class="info">
                    <div>
                        <span>Third item</span>
                        <span>$5</span>
                        <span>Brief description</span>
                    </div>
                </li>
                <li class="info">
                    <div>
                        <span>Total (USD)</span>
                        <span>$20</span>
                    </div>
                </li>
            </ul>
            <input type="text" name="promo_code" placeholder="Promo code">
            <input type="submit" value="Redeem">
        </div>    
            </div>
        </div>
        
        </form>
    
    <script>
        
        document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('checkout-form');

            form.addEventListener('submit', (event) => {
                
                event.preventDefault();
                event.stopPropagation();
                
              
                if (!validateForm()) {
                    // 유효하지 않으면 여기서 중단
                    return;
                }

        
            });

            function validateForm() {
                let isValid = true;
                const inputs = form.querySelectorAll('input[required], select[required]');

            
                inputs.forEach(input => {
                    if (input.type === 'radio') {
                       
                        return;
                    }

                    if (input.value.trim() === '') {
                        isValid = false;
                        showError(input, input.nextElementSibling.textContent);
                    } else {
                        showSuccess(input);
                    }
                });

                // 라디오 버튼 그룹 검사
                const paymentMethods = form.querySelectorAll('input[name="pay"]');
                const paymentMethodChecked = Array.from(paymentMethods).some(radio => radio.checked);
                
                if (!paymentMethodChecked) {
                    isValid = false;
                    // 라디오 그룹의 에러 메시지는 마지막 라디오 버튼 다음에 있는 div를 사용
                    const errorDiv = document.querySelector('input[name="pay"] ~ .invalid-feedback');
                    if(errorDiv){
                        errorDiv.style.display = 'block';
                    }
                } else {
                    const errorDiv = document.querySelector('input[name="pay"] ~ .invalid-feedback');
                    if(errorDiv){
                         errorDiv.style.display = 'none';
                    }
                }

                return isValid;
            }

            function showError(input, message) {
                const formField = input.parentElement;
                const errorDisplay = formField.querySelector('.invalid-feedback');

                input.classList.remove('is-valid');
                input.classList.add('is-invalid');
                if(errorDisplay){
                    errorDisplay.textContent = message;
                    errorDisplay.style.display = 'block';
                }
            }

            function showSuccess(input) {
                 const formField = input.parentElement;
                 const errorDisplay = formField.querySelector('.invalid-feedback');

                 input.classList.remove('is-invalid');
                 input.classList.add('is-valid');
                 if(errorDisplay){
                    errorDisplay.style.display = 'none';
                 }
            }
        });
    </script>
</body>
</html>