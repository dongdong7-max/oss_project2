<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2025-11-03</title>

    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
</head>
<style>
    #div_click{
        background-color: pink;
        padding : 50px;
    }
    .hidden{
        display: none;
    }
</style>
<body>
    id : <input type="text" id="input_id"/>
    name : <input type="text" id="input_name" />
    age : <input type="number" id="input_age" />
    <button onclick="addStudent()">add Student</button>
    <button onclick="updateStudent()">update Student</button>

    <button onclick="getStudents()">get Student</button>
    <div>목록</div>
    <div id="div_list"></div>
<!-- <div id="div_01">div입니다.</div> 

If you click on me, I will disappear. 
<div id="div_click">1. Click Me?</div>

when you click this, font color will be changed.
<div id="div_click2">2. Click Me?</div>

<p id="p3">click me</p>
<span id="p2" style="background-color: aqua; position: absolute;">moving</span>
-->
<script>

function addStudent() {
    const xhr = new XMLHttpRequest();
    xhr.open("POST","http://localhost:3000/students");
    xhr.setRequestHeader("content-type","application/json");
    let data = { name: $("#input_name").val(), age: $("#input_age").val() };
    xhr.send(JSON.stringify(data));
    xhr.onload = () => {
        if (xhr.status === 200) {
            const res = JSON.parse(xhr.response);
            alert(JSON.stringify(res));
        } else {
            console.log(xhr.status, xhr.statusText);
        }
    }
}
function updateStudent() {
    const xhr = new XMLHttpRequest();
    xhr.open("PUT","http://localhost:3000/students/" + $("#input_id").val());
    xhr.setRequestHeader("content-type","application/json");
    let data = { name: $("#input_name").val(), age: $("#input_age").val() };
    xhr.send(JSON.stringify(data));
    xhr.onload = () => {
        if (xhr.status === 200) {
            const res = JSON.parse(xhr.response);
            alert(JSON.stringify(res));
        } else {
            console.log(xhr.status, xhr.statusText);
        }
    }
}
function getStudents() {
    const xhr = new XMLHttpRequest();
    xhr.open("GET","http://localhost:3000/students");
    xhr.setRequestHeader("content-type","application/json");
    xhr.send();
    xhr.onload = () => {
        if (xhr.status === 200) {
            const res = JSON.parse(xhr.response);
            alert(JSON.stringify(res));
            $("#div_list").html("");
            for(let each of res){
                $("#div_list").append(
                    "<div>" + each["id"] + "//" + each["name"] + "//" + each["age"] + "//" + "<div>"
                );
            }
        } else {
            console.log(xhr.status, xhr.statusText);
        }
    }
}

/*
let div_01 = document.getElementById("div_01");
alert(div_01.innerHTML);

let div_01_jquery = $("#div_01");
alert(div_01_jquery.html());
*/

$(function(){
    $("#div_click").click(function(){
        alert("clicked");
        /*
        $(this).hide();
        $(this).remove();
        $(this).addClass("hidden");
        $(this).css("display", "none");
        $(this).attr("style", "display:none");
        */
    });
    $("#div_click2").click(function(){
        alert("clicked2");
        $(this).css("color", "red");
    });

    $("#p3").click(function () {
        //alert("clicked : p3");
        $("#p2").animate({ left: "250px" });
    });
});
</script>
</body>
</html>